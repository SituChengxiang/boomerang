# ä¸­å›½å¤§å­¦ç”Ÿç‰©ç†å­¦æœ¯ç«èµ›ï¼ˆCUPTï¼‰ Invent Yourself: Paper Boomerang ä»£ç å‚è€ƒ

CUPTè®©æˆ‘ä»¬ç›¸é‡äºæ­¤å§ï¼ˆ  
è¿™ä¸ªä»“åº“é‡Œæœ‰ï¼š  
- Goè¯­è¨€çš„æ•°å€¼è®¡ç®—å’ŒGUIæ¨¡æ‹Ÿ
- Rustç”¨äºç§‘å­¦è®¡ç®—çš„å°è¯•
- Pythonè¿›è¡Œæ•°æ®æ‹Ÿåˆå°è¯•
- ~~Gunplotç»˜å›¾ä»£ç ~~
- Juliaå°è¯•æ›´é«˜æ€§èƒ½è®¡ç®—
- ~~wxMaximaçå†™çš„ä»£ç ~~

ï¼ˆæˆ‘çœŸæ˜¯æˆåˆ†å¤æ‚å•Šâ€¦â€¦ï¼‰

æ¥çœ‹çœ‹å°±å¥½ï¼Œå¦‚æœèƒ½å¸®åˆ°ä½ ï¼Œæœ¬äººä¸èƒœè£å¹¸

## é¡¹ç›®ç»“æ„

å› ä¸ºæŠŠç ”ç©¶å·¥ä½œå’Œå¼€å‘å·¥ä½œæ”¾åœ¨äº†ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œæ‰€ä»¥æ•´ä¸ªé¡¹ç›®çœ‹èµ·æ¥å¹¶ä¸é‚£ä¹ˆå¸¸è§„
```plaintext
boomerang
|-- README.md
|-- dataï¼ˆæ•°æ®ç»„ï¼‰
|   |-- intermï¼ˆå¤„ç†æ—¶çš„ä¸­é—´æ–‡ä»¶ï¼‰
|   |-- rawï¼ˆåŸå§‹æ•°æ®æ–‡ä»¶ï¼‰
|   `-- finalï¼ˆå¤„ç†åçš„æ–‡ä»¶ï¼‰
|-- outï¼ˆæ•´ä¸ªé¡¹ç›®è¾“å‡ºçš„ä¸€äº›æ–‡ä»¶ï¼‰
`-- srcï¼ˆæºç æ–‡ä»¶ï¼‰
    |-- visualizationï¼ˆå¯è§†åŒ–ç›¸å…³ï¼‰
    |-- fitï¼ˆè½¨è¿¹æ‹Ÿåˆç›¸å…³ï¼‰
    |-- preprocessï¼ˆé¢„å¤„ç†ï¼‰
    `-- utilsï¼ˆä¸€äº›å°çš„å·¥å…·ï¼‰
```

## æˆ‘è¸©çš„å‘

1. ä¸€å®šè¦å…ˆç¡®ä¿å¤„ç†åçš„æ•°æ®æ˜¯ç‰©ç†è‡ªæ´½çš„


## æ¥ä¸‹æ¥çš„å·¥ä½œå®‰æ’

ğŸ¯ ä¸­ä¼˜å…ˆçº§ï¼ˆæ¥ä¸‹æ¥ï¼‰

### 4. **æ—¶é—´å¤„ç†æ¨¡å—** (`time_utils.py`)
**é‡å¤é€»è¾‘**ï¼šæ—¶é—´æ ‡å‡†åŒ–ã€å‡åŒ€æ€§æ£€æŸ¥
```python
# æ ¸å¿ƒåŠŸèƒ½
def normalize_time(t, target_freq=60.0)
def is_uniform_time(t, rel_tol=1e-3)
def resample_time_series(t, values, new_freq=60.0)
```

### 5. **è½¨è¿¹åˆ†ææ¨¡å—** (`trajectory.py`)
**é‡å¤é€»è¾‘**ï¼šè½¨è¿¹ç‰¹å¾æå–
```python
# æ ¸å¿ƒåŠŸèƒ½
def calculate_trajectory_features(t, x, y, z)
def estimate_initial_velocity(t, x, y, z, method='weighted')
def calculate_flight_time(t, z, ground_level=0.0)
```

## ä¸€äº›æ¨¡å—çš„å‚æ•°è°ƒæ•´è¯´æ˜

### 1. smoother - å¹³æ»‘æ¨¡å—

åˆ©ç”¨RTSKalmanSmootherè¿›è¡ŒåŒå‘è½¨è¿¹å¹³æ»‘ï¼Œç›¸æ¯”kalmanæ»¤æ³¢æ›´å¹³ç¨³ä¸€ç‚¹
```python
# __init__é‡Œçš„å‚æ•°
self.process_noise = 0.01      # è¿‡ç¨‹å™ªå£°ï¼ˆæ¨¡å‹ä¸ç¡®å®šæ€§ï¼‰
self.measurement_noise = 0.1    # æµ‹é‡å™ªå£°ï¼ˆæ•°æ®ä¸ç¡®å®šæ€§ï¼‰
```
**process_noiseï¼ˆè¿‡ç¨‹å™ªå£°ï¼‰**

- **å«ä¹‰**ï¼šæ¨¡å‹å¯¹è‡ªå·±é¢„æµ‹çš„ä¸ç¡®å®šåº¦
- **é£é™©**ï¼šå¦‚æœ**è¿‡å¤§** â†’ ä¼šè¿‡åº¦å¹³æ»‘
  - Kalmanä¼šç›¸ä¿¡æ¨¡å‹ï¼ˆå¸¸é€Ÿæ¨¡å‹ï¼‰è€Œä¸ç›¸ä¿¡æ•°æ®
  - ç»“æœï¼šè½¨è¿¹è¢«"æ‹‰"æˆç›´çº¿ï¼Œä¸¢å¤±äº†å›æ—‹é•–çš„çœŸå®æ³¢åŠ¨
  - **æœ«æ®µå°¤å…¶æ˜æ˜¾**ï¼šç€é™†æ—¶å›æ—‹é•–åœ¨å‡é€Ÿï¼Œé€Ÿåº¦å˜åŒ–å¿«ï¼Œä½†å¸¸é€Ÿæ¨¡å‹å‡è®¾"é€Ÿåº¦ä¸å˜"

**measurement_noiseï¼ˆæµ‹é‡å™ªå£°ï¼‰**

- **å«ä¹‰**ï¼šæ•°æ®æœ¬èº«çš„ä¸ç¡®å®šåº¦ï¼ˆä¼ æ„Ÿå™¨å™ªå£°ï¼‰
- **é£é™©**ï¼šå¦‚æœ**è¿‡å¤§** â†’ ä¹Ÿä¼šè¿‡åº¦å¹³æ»‘
  - è®¤ä¸ºæ•°æ®å™ªå£°å¤§ï¼Œæ‰€ä»¥å¤šå¹³æ»‘
  - **æœ«æ®µé—®é¢˜**ï¼šç€é™†æ—¶çœŸå®ä¿¡å·å¼±ï¼Œå™ªå£°å æ¯”é«˜ï¼Œæ›´å®¹æ˜“è¢«å¹³æ»‘æ‰

```python
def get_smoother_config() -> dict:
    """Return default smoother configuration."""
    return {
        "kalman_process_noise": 1e-4,      # æ¯”ä½ çš„é»˜è®¤0.01å°ï¼ï¼ˆæ›´å¹³æ»‘ï¼‰
        "kalman_measurement_noise": 1e-2,    # æ¯”ä½ çš„é»˜è®¤0.1å°ï¼ï¼ˆæ›´å¹³æ»‘ï¼‰
        "savgol_window": 7,                # çª—å£å¤§å°
        "savgol_polyorder": 3,              # å¤šé¡¹å¼é˜¶æ•°
    }
```

## ç‰©ç†æ¨¡å‹

- **åæ ‡ç³»**ï¼šæƒ¯æ€§ç³» $OXYZ$ + æœ¬ä½“ç³» $Oxyz$ï¼ˆè´¨å¿ƒä¸ºåŸç‚¹ï¼Œ$z$ è½´ä¸ºè‡ªè½¬è½´ï¼‰  
- **æ°”åŠ¨åŠ›**ï¼š  
  $$
  F_L = \frac{1}{2} \rho v^2 C_L A,\quad F_D = \frac{1}{2} \rho v^2 C_D A
  $$  
- **åŠ›çŸ©ä¸è¿›åŠ¨**ï¼ˆBET + é™€èºæ•ˆåº”ï¼‰ï¼š  
  $$
  \tau = \frac{D}{2} \rho C_L \omega v a^3 d,\quad \Omega = \frac{\tau}{I_z \omega}
  $$  
- **è¿åŠ¨å¾®åˆ†æ–¹ç¨‹**ï¼ˆæœ¬ä½“ç³»ï¼‰ï¼š  
  $$
  \begin{aligned}
  \dot{v}_x &= \frac{D \rho C_L \omega a^3 d}{2 I_z} v_y - \frac{\rho C_D A}{2m} v_x \\
  \dot{v}_y &= -\frac{\rho A (C_L - C_D)}{2m} v_y \quad\text{ï¼ˆâš ï¸ æ­¤é¡¹ç‰©ç†å½¢å¼å­˜ç–‘ï¼‰} \\
  \dot{v}_z &= \frac{\rho A (C_L - C_D)}{2m} v_z - g
  \end{aligned}
  $$

### ğŸ“ å®éªŒå¯¹è±¡å‚æ•°ï¼ˆå›ºå®šæ„å‹ï¼‰  
- ææ–™ï¼šåŠå¼  A4 çº¸æŠ˜å   
- å‡ ä½•ï¼šç¿¼å±• $a = 0.15\,\text{m}$ï¼Œç¿¼å®½ $d = 0.028\,\text{m}$ï¼Œå¤¹è§’ $90^\circ$  
- è´¨é‡ï¼š$m = 2.183\,\text{g}$  
- è‡ªè½¬è§’é€Ÿåº¦å®æµ‹èŒƒå›´ï¼š$\omega \in [85, 100]\,\text{rad/s}$
